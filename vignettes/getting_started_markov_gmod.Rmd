---
title: "Getting started with building Markov models in gmod"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Getting started with building Markov models in gmod}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---
The purpose of this vignette is to provide a step by step guide to illustrate the main features of gmod for markov modeling:

* think about the structure of gom by adopting a unified sequence of events
* structure of gmod of decision -> makrov states -> event1 -> event2 -> ... -> last events
* definitions: 
  * states
  * events
  * final outcomes
  * intermediate outcomes
  * payoffs 
* distinguishing between states and events
* examining the resulting equations and formulae
* adding discounting factors
* adding events
* accessing prior (upstream event values)
* adding states

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(gmod)
```

```{r}
mygmod <- gmod(model_type = "Markov", n_cycles = 2) + 
  decisions("StandardOfCare") + 
  states("H", "D") + 
  initial_probs(states = "H", probs = 1) +  
  event_mapping(event = "die",  
                values = c(F, T), 
                results = c(curr_state(), "D"), 
                probs = c(Inf, pDie(state))) 
mygmod
```

```{r}
pDie <- function(state){
  if(state=="H") 0.1 else 0
}
pDie("H")
pDie("D")
```

```{r}
model_struc <- gmod_build(mygmod)
model_struc
```

```{r}
gmod_gen_model_function(model_struc)
```

```{r}
my_markov_model(return_transition_prob = T, return_trace = T)
```


